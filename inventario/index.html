<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Canby · Gestión de Inventario</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="../css/tokens.css" />
  <link rel="stylesheet" href="../css/app.css" />

  <script type="module">
    import { renderHeaderTailwind } from '../js/comunes.js';
    window.addEventListener('DOMContentLoaded', () => {
      const placeholder = document.getElementById('app-header');
      placeholder.outerHTML = renderHeaderTailwind({
        titulo: 'Sistema de Inventario - Canby',
        subtitulo: 'Catálogo Maestro de Productos de Aseo'
      });
    });
  </script>
  
</head>
<body class="min-h-screen bg-[var(--background)] text-[var(--foreground)]">
  <div id="app-header"></div>
  
    <main class="mx-auto max-w-7xl px-4 sm:px-6 py-6">
    <section class="mb-4">
      <h2 class="text-2xl font-bold text-slate-900">Gestión de Inventario</h2>
      <p class="text-slate-600 mt-1">Registra movimientos de entrada, salida y ajustes de inventario</p>
    </section>

    <section class="grid gap-5 md:grid-cols-3">
      <div class="rounded-2xl bg-white border border-[var(--border)] p-6">
        <div class="flex items-start justify-between">
          <h3 class="font-semibold text-slate-800">Total Productos</h3>
          <svg class="w-5 h-5 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"
              d="M21 7.5l-9-4.5-9 4.5 9 4.5 9-4.5v9l-9 4.5-9-4.5v-9" />
          </svg>
        </div>
        <div class="mt-4 text-4xl font-bold">10</div>
        <p class="text-slate-500 mt-1">Productos registrados</p>
      </div>

      <div class="rounded-2xl bg-white border border-[var(--border)] p-6">
        <div class="flex items-start justify-between">
          <h3 class="font-semibold text-slate-800">Stock Total</h3>
          <svg class="w-5 h-5 text-slate-400" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"
              d="M3 8l9-4 9 4v9a1 1 0 01-1 1H4a1 1 0 01-1-1V8zM8 14h8" />
          </svg>
        </div>
        <div class="mt-4 text-4xl font-bold">313.1</div>
        <p class="text-slate-500 mt-1">Unidades en inventario</p>
      </div>

      <div class="rounded-2xl bg-white border border-[var(--border)] p-6">
        <div class="flex items-start justify-between">
          <h3 class="font-semibold text-slate-800">Stock Bajo</h3>
          <svg class="w-5 h-5 text-rose-500" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"
              d="M12 9v4m0 4h.01M10.29 3.86l-7.5 13A1 1 0 003.62 19h16.76a1 1 0 00.86-1.5l-7.5-13a1 1 0 00-1.72 0z" />
          </svg>
        </div>
        <div class="mt-4 text-4xl font-bold text-rose-600">1</div>
        <p class="text-slate-500 mt-1">Productos con stock mínimo</p>
      </div>
    </section>

    <section class="mt-6 rounded-2xl bg-white border border-[var(--border)] p-6">
      <div class="flex items-center gap-2 mb-4">
        <svg class="w-5 h-5 text-rose-600" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"
            d="M12 9v4m0 4h.01M10.29 3.86l-7.5 13A1 1 0 003.62 19h16.76a1 1 0 00.86-1.5l-7.5-13a1 1 0 00-1.72 0z" />
        </svg>
        <h3 class="text-lg font-semibold text-slate-900">Productos con Stock Bajo</h3>
      </div>

      <div class="rounded-xl border border-rose-100 bg-rose-50/60 px-4 py-3 flex items-center justify-between">
        <div>
          <p class="font-semibold text-slate-900">Desengrasante Multiusos</p>
          <p class="text-slate-600 text-sm">Desengrasantes</p>
        </div>
        <div class="flex items-center gap-3">
          <span class="inline-flex items-center rounded-full bg-rose-100 text-rose-700 text-sm font-semibold px-2 py-1">Min: 12</span>
          <span class="inline-flex items-center rounded-full bg-slate-100 text-slate-700 text-sm font-semibold px-2 py-1">8.2 L</span>
        </div>
      </div>
    </section>

    <section class="mt-6 rounded-2xl bg-white border border-[var(--border)] p-6">
      <h3 class="text-lg font-semibold text-slate-900 mb-4 flex items-center gap-2">
        <svg class="w-5 h-5 text-slate-700" viewBox="0 0 24 24" fill="none" stroke="currentColor">
          <path stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" d="M12 6v12m6-6H6" />
        </svg>
        Registrar Movimiento
      </h3>

      <form id="frmMovimiento" class="grid gap-4 md:grid-cols-2">
        <label class="space-y-1">
          <span class="font-medium">Producto *</span>
          <select class="w-full rounded-[10px] bg-[var(--input-background)] border border-[var(--border)] px-4 py-3"
                  name="producto" required>
            <option value="" selected>Seleccionar producto</option>
            <option>Cloro Líquido 5.25%</option>
            <option>Jabón Lava Loza Concentrado</option>
            <option>Desengrasante Multiusos</option>
            <option>Limpiavidrios</option>
          </select>
        </label>

        <label class="space-y-1">
          <span class="font-medium">Tipo de Movimiento *</span>
          <select class="w-full rounded-[10px] bg-[var(--input-background)] border border-[var(--border)] px-4 py-3"
                  name="tipo" required>
            <option value="" selected>Seleccionar tipo</option>
            <option>Entrada</option>
            <option>Salida</option>
            <option>Ajuste</option>
          </select>
        </label>

        <label class="space-y-1">
          <span class="font-medium">Cantidad *</span>
          <input type="number" step="0.01" min="0" name="cantidad"
                 class="w-full rounded-[10px] bg-[var(--input-background)] border border-[var(--border)] px-4 py-3"
                 placeholder="0.00" required />
        </label>

        <label class="space-y-1">
          <span class="font-medium">Fecha *</span>
          <input type="date" name="fecha"
                 class="w-full rounded-[10px] bg-[var(--input-background)] border border-[var(--border)] px-4 py-3"
                 required />
        </label>

        <label class="space-y-1 md:col-span-1">
          <span class="font-medium">Documento/Soporte</span>
          <input type="text" name="documento"
                 class="w-full rounded-[10px] bg-[var(--input-background)] border border-[var(--border)] px-4 py-3"
                 placeholder="Ej: Orden #123, Remisión #456" />
        </label>

        <label class="space-y-1 md:col-span-1">
          <span class="font-medium">Motivo/Observaciones *</span>
          <textarea name="motivo" rows="1"
                    class="w-full rounded-[10px] bg-[var(--input-background)] border border-[var(--border)] px-4 py-3"
                    placeholder="Ej: Producción propia, venta, merma, corrección..." required></textarea>
        </label>

        <div class="md:col-span-2">
          <button class="rounded-[10px] bg-[var(--primary)] text-[var(--primary-foreground)] font-bold px-5 py-3">
            Registrar Movimiento
          </button>
        </div>
      </form>
    </section>

    <section class="mt-6 rounded-2xl bg-white border border-[var(--border)] p-6">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold text-slate-900 flex items-center gap-2">
          <svg class="w-5 h-5 text-slate-700" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"
              d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          Historial de Movimientos
        </h3>

        <button id="btnExport" class="inline-flex items-center gap-2 rounded-[10px] border border-[var(--border)] px-4 py-2 bg-white hover:bg-slate-50">
          <svg class="w-5 h-5 text-slate-700" viewBox="0 0 24 24" fill="none" stroke="currentColor">
            <path stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round"
              d="M4 16v2a2 2 0 002 2h12a2 2 0 002-2v-2M7 10l5-5 5 5M12 15V5" />
          </svg>
          Exportar CSV
        </button>
      </div>

      <div class="grid gap-3 md:grid-cols-4 mb-4">
        <div class="md:col-span-1">
          <input id="filtroTexto" class="w-full rounded-[10px] bg-[var(--input-background)] border border-[var(--border)] px-4 py-3" placeholder="Producto o motivo..." />
        </div>
        <div>
          <select id="filtroTipo" class="w-full rounded-[10px] bg-[var(--input-background)] border border-[var(--border)] px-4 py-3">
            <option value="">Todos</option>
            <option>Entrada</option>
            <option>Salida</option>
            <option>Ajuste</option>
          </select>
        </div>
        <div><input id="filtroDesde" type="date" class="w-full rounded-[10px] bg-[var(--input-background)] border border-[var(--border)] px-4 py-3" /></div>
        <div><input id="filtroHasta" type="date" class="w-full rounded-[10px] bg-[var(--input-background)] border border-[var(--border)] px-4 py-3" /></div>
      </div>

      <div class="overflow-auto rounded-xl border border-[var(--border)]">
        <table id="tablaMov" class="min-w-full text-left">
          <thead class="bg-slate-50 text-slate-600">
            <tr class="text-sm">
              <th class="px-4 py-3">Fecha</th>
              <th class="px-4 py-3">Producto</th>
              <th class="px-4 py-3">Tipo</th>
              <th class="px-4 py-3">Cantidad</th>
              <th class="px-4 py-3">Stock Anterior</th>
              <th class="px-4 py-3">Stock Nuevo</th>
              <th class="px-4 py-3">Motivo</th>
              <th class="px-4 py-3">Usuario</th>
            </tr>
          </thead>
          <tbody class="text-slate-800 text-sm bg-white"></tbody>
        </table>
      </div>

      <p id="tablaResumen" class="text-slate-600 text-sm mt-3"></p>
    </section>
  </main>

  <script src="../js/inventario.js"></script>
</body>
</html>
